<h1 class="page-header">Booking Management</h1>
<a href="/" class="back-link">‚Üê Back to Home</a>

<div class="table-container"> 

    <label>Status Filter:</label>
    <select id="statusFilter">
        <option value="">All</option>
        <option value="Reserved">Reserved</option>
        <option value="Checked-In">Checked-In</option>
        <option value="Checked-Out">Checked-Out</option>
    </select>

    <button id="clearFilters" class="filter-btn">Clear Filters</button>

    <table id="bookingTable" class="spooky-table" data-turbo="false">
    <thead>
        <tr>
        <th>Confirmation #</th>
        <th>Guest Name</th>
        <th>Room #</th>
        <th>Check-In</th>
        <th>Check-Out</th>
        <th>Status</th>
        </tr>
    </thead>

    <tbody>
        <% @bookings.each do |booking| %>
        <tr>
            <td><%= booking.confirmation_number %></td>
            <td><%= booking.guest_name %></td>
            <td><%= booking.room_number %></td>
            <td><%= booking.check_in_date %></td>
            <td><%= booking.check_out_date %></td>
            <td class="status"><%= booking.status %></td>
        </tr>
        <% end %>
    </tbody>
    </table>

<script>
  const statusFilter = document.getElementById("statusFilter");
  const clearBtn = document.getElementById("clearFilters");
  const rows = document.querySelectorAll("#bookingTable tbody tr");

  statusFilter.addEventListener("change", () => {
    filterRows();
  });

  clearBtn.addEventListener("click", () => {
    statusFilter.value = "";
    filterRows();
  });

  function filterRows() {
    let status = statusFilter.value;

    rows.forEach(row => {
      let rowStatus = row.querySelector(".status").textContent;

      if (status === "" || rowStatus === status) {
        row.style.display = "";
      } else {
        row.style.display = "none";
      }
    });
  }
</script>
